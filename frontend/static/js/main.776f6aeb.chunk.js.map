{"version":3,"sources":["App.js","index.js"],"names":["App","props","state","todoList","activeItem","id","title","completed","editing","fetchTasks","bind","handleChange","getCookie","handleSubmit","taskUpdate","taskDelete","lineThrough","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","this","fetch","then","res","json","data","setState","e","value","target","preventDefault","csrftoken","URL","method","headers","body","JSON","stringify","taskObj","className","onSubmit","onChange","type","placeholder","map","task","key","onClick","aria-hidden","Component","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.776f6aeb.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      todoList: [],\n      activeItem: {\n        id: null,\n        title: '',\n        completed: false\n      },\n      editing: false\n    }\n    this.fetchTasks = this.fetchTasks.bind(this)\n    this.handleChange = this.handleChange.bind(this)\n    this.getCookie = this.getCookie.bind(this)\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.taskUpdate = this.taskUpdate.bind(this)\n    this.taskDelete = this.taskDelete.bind(this)\n    this.lineThrough = this.lineThrough.bind(this)\n  }\n\n  getCookie(name) {\n    let cookieValue = null;\n    if (document.cookie && document.cookie !== '') {\n        const cookies = document.cookie.split(';');\n        for (let i = 0; i < cookies.length; i++) {\n            const cookie = cookies[i].trim();\n            // Does this cookie string begin with the name we want?\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n  }\n\n  componentDidMount() {\n    this.fetchTasks()\n  }\n\n  fetchTasks() {\n    // fetch('http://127.0.0.1:8000/api/task-list/')\n    fetch('https://jhmyung.pythonanywhere.com/api/task-list/')\n    .then(res => res.json())\n    .then(data => {\n      this.setState({\n        todoList:data\n      })\n    })\n  }\n\n  handleChange(e) {\n    const { value } = e.target;\n    this.setState({\n      activeItem: {\n        ...this.state.activeItem,\n        title: value\n      }\n    })\n  }\n\n  handleSubmit(e) {\n    const { activeItem:{ title, id }, editing } = this.state\n    e.preventDefault()\n    const csrftoken = this.getCookie('csrftoken');\n    // let URL = 'http://127.0.0.1:8000/api/task-create/'\n    let URL = 'https://jhmyung.pythonanywhere.com/api/task-create/'\n\n    if (editing) {\n      // URL = `http://127.0.0.1:8000/api/task-update/${id}/`\n      URL = `https://jhmyung.pythonanywhere.com/api/task-update/${id}/`\n      this.setState({\n        editing:false\n      })\n    }\n\n    fetch(URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': csrftoken\n      },\n      body: JSON.stringify({ title }),\n    })\n    .then(res => {\n      this.fetchTasks()\n      this.setState({\n        activeItem: {\n          id: null,\n          title: '',\n          completed: false\n        }\n      })\n    })\n  }\n\n  taskUpdate(taskObj) {\n    this.setState({\n      activeItem: taskObj,\n      editing: true\n    })\n  }\n\n  taskDelete(taskObj) {\n    const csrftoken = this.getCookie('csrftoken');    \n    // let URL = `http://127.0.0.1:8000/api/task-delete/${taskObj.id}/`\n    let URL = `https://jhmyung.pythonanywhere.com/api/task-delete/${taskObj.id}/`\n\n    fetch(URL, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': csrftoken\n      },\n    })\n    .then(res => {\n      this.fetchTasks()\n    })\n  }\n\n  lineThrough(taskObj) {\n    taskObj.completed = !taskObj.completed\n\n    const csrftoken = this.getCookie('csrftoken');\n    // let URL = `http://127.0.0.1:8000/api/task-update/${taskObj.id}/`\n    let URL = `https://jhmyung.pythonanywhere.com/api/task-update/${taskObj.id}/`\n  \n    fetch(URL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': csrftoken\n      },\n      body: JSON.stringify({ \n          title: taskObj.title, \n          completed: taskObj.completed \n        }),\n    })\n    .then(res => {\n      this.fetchTasks()\n    })\n  }\n  \n  render() {\n    const { todoList } = this.state\n    const { activeItem:{ title } } = this.state\n    return(\n      <div className=\"container\">\n        <header className=\"header\">\n          <h2>Todo List</h2>\n          <h4>(Django-RESTful-API + React.js)</h4>\n        </header>\n\n        <div className=\"inputBox\">\n            <form onSubmit={this.handleSubmit} method=\"POST\" className=\"inputForm\">\n                <input\n                onChange={this.handleChange}\n                type=\"text\" \n                placeholder=\"Add task\" \n                className=\"inputField\" \n                name=\"title\" \n                value={title}\n                />\n                <button type=\"submit\" className=\"submitBtn\">Submit</button>\n            </form>\n        </div>\n\n        <div className=\"list-container\">\n            <ul className=\"unorder-list\">              \n              {todoList.map(task => {\n                return (\n                  <li className=\"task-list\" key={task.id}>\n                    <span \n                    className={`content ${task.completed ? \"active\" : \"\"}`}\n                    onClick={() => {\n                      this.lineThrough(task)\n                    }}\n                    >{task.title}</span>\n                    <span className=\"icon\">\n                      <i \n                      className=\"far fa-edit\" \n                      aria-hidden=\"true\"\n                      onClick={() => {\n                        this.taskUpdate(task)\n                      }}\n                      ></i>\n                      <i \n                      className=\"far fa-trash-alt\" \n                      aria-hidden=\"true\"\n                      onClick={() => {\n                        this.taskDelete(task)\n                      }}\n                      ></i>\n                    </span>\n                </li>\n                )\n              })}\n            </ul>\n        </div>\n\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}